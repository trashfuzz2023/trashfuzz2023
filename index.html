<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="webthemez">
    <title>TrashFuzz</title>
	<!-- core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet"> 
    <link href="css/prettyPhoto.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet"> 
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.ico"> 
</head> 

<body id="home">

    <header id="header">
        <nav id="main-nav" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html"><h2>TrashFuzz2023</h2></a>
                </div>
				
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        <li class="scroll active"><a href="#home">Home</a></li> 
						<!-- <li class="scroll"><a href="#demo">Demos</a></li>     -->
                        <li class="scroll"><a href="#quickstart">QuickStart</a></li>   
                        <li class="scroll"><a href="#sourcecode">SourceCode</a></li>      
                        <li class="scroll"><a href="#specifications">Specifications</a></li>     
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->

    </header><!--/header-->

    <section id="hero-banner">
             <div class="banner-inner">
                    <div class="container">
                        <div class="row">
                            <div class="col-sm-12">
                                 
                                    <h2><b>TrashFuzz</b> </h2>
                                    <!-- <p>Lorem ipsum dolor sit amet, consectetur adipisici <br/> Praesent eget risus.</p> -->
                                    <a class="btn btn-primary btn-lg" href="#quickstart">Explore Now!</a>
                                
                            </div>
                        </div>
                    </div>
                </div>
    </section>



    <section id="quickstart">
         <div class="container">
            <div class="section-header">
                    <h2 class="section-title wow fadeInDown">Quick Start</h2>
                    <p class="wow fadeInDown">Let expolre TrashFuzz in a quick start!</p>
                </div>

            <div class="row FeatLayout">
                <h3 class="column-title">Step1: Run Apollo with LGSVL</h3>
                <p>Follow the steps detailed in the <a href="https://www.svlsimulator.com/docs/archive/2020.06/apollo-master-instructions/">documentation</a> to set up Apollo+LGSVL.</p>
                <p>Install the python API of LGSVL as shown in <a href="https://www.svlsimulator.com/docs/archive/2020.06/python-api/">here</a> and set the LGSVL to API Only Mode.</p>
                <p>Test your installiation by the following code. You should see the vehcile moving toeard the destination!</p>
<pre>
<code>
import os
import lgsvl
from environs import Env

env = Env()

sim = lgsvl.Simulator(
    env.str("LGSVL__SIMULATOR_HOST", lgsvl.wise.SimulatorSettings.simulator_host),
    env.int("LGSVL__SIMULATOR_PORT", lgsvl.wise.SimulatorSettings.simulator_port)
)

if sim.current_scene == lgsvl.wise.DefaultAssets.map_borregasave:
    sim.reset()
else:
    sim.load(lgsvl.wise.DefaultAssets.map_borregasave)

spawns = sim.get_spawn()

state = lgsvl.AgentState()
state.transform = spawns[0]

ego = sim.add_agent(lgsvl.wise.DefaultAssets.ego_lincoln2017mkz_apollo5, lgsvl.AgentType.EGO, state)
ego.connect_bridge(
    env.str("LGSVL__AUTOPILOT_0_HOST", lgsvl.wise.SimulatorSettings.bridge_host),
    env.int("LGSVL__AUTOPILOT_0_PORT", lgsvl.wise.SimulatorSettings.bridge_port)
)

# Dreamview setup
dv = lgsvl.dreamview.Connection(sim, ego, env.str("LGSVL__AUTOPILOT_0_HOST", "127.0.0.1"))
dv.set_hd_map('Borregas Ave')
dv.set_vehicle('Lincoln2017MKZ')
modules = [
    'Localization',
    'Perception',
    'Transform',
    'Routing',
    'Prediction',
    'Planning',
    'Camera',
    'Traffic Light',
    'Control'
]
destination = spawns[0].destinations[0]
dv.setup_apollo(destination.position.x, destination.position.z, modules)

sim.run()
</code>
</pre>
            </div>

            <div class="row FeatLayout">
                <h3 class="column-title">Step2: Add adversarial objects to LGSVL</h3>
                <p>Open the following foler: </p>
                <pre>
                    <code>
cd /root/of/the/lgsvl/AssetBundles/Controllables
                    </code>
                </pre>
                <p>Download the adversarial objects assets from <a href="https://github.com/trashfuzz2023/Adversarial_Object_Assets.git">this link</a>, put them in the aboe folder.</p>
                <pre>
                    <code>
git clone https://github.com/trashfuzz2023/Adversarial_Object_Assets.git
                    </code>
                </pre>

                <p>Now run the following code to check whether we can spawn these adversarial objects! You should see a bench spawnd in front of the vehicle.</p>
<pre>
<code>
import os
import lgsvl

sim = lgsvl.Simulator(os.environ.get("SIMULATOR_HOST", "127.0.0.1"), 8181)
scene_name = "CubeTown"

if sim.current_scene == scene_name:
  sim.reset()
else:
  sim.load(scene_name, 42)

spawns = sim.get_spawn()

state = lgsvl.AgentState()
forward = lgsvl.utils.transform_to_forward(spawns[0])
right = lgsvl.utils.transform_to_right(spawns[0])
up = lgsvl.utils.transform_to_up(spawns[0])
state.transform = spawns[0]

ego = sim.add_agent("Lincoln2017MKZ (Apollo 5.0)", lgsvl.AgentType.EGO, state)

#place objects
state = lgsvl.ObjectState()
state.transform.rotation = spawns[0].rotation
state.velocity = 0.000000001 * up
state.angular_velocity = 0.000000001 * right

start = spawns[0].position + 10 * forward
state.transform.position = start

o = sim.controllable_add("Bench0", state)
print("Place Bench0")
</code>
</pre>

            <p>We can try some test cases now! In following one, the Apollo calssify the trash bins into pedestrians and fail to pass.</p>
<pre>
<code>
import os
import lgsvl
from environs import Env

import math
import random

env = Env()

sim = lgsvl.Simulator(
    env.str("LGSVL__SIMULATOR_HOST", "169.254.42.175"),
    env.int("LGSVL__SIMULATOR_PORT", lgsvl.wise.SimulatorSettings.simulator_port)
)

# if sim.current_scene == "12da60a7-2fc9-474d-a62a-5cc08cb97fe8":
if sim.current_scene == lgsvl.wise.DefaultAssets.map_borregasave:
    sim.reset()
else:
    sim.load(lgsvl.wise.DefaultAssets.map_borregasave)

spawns = sim.get_spawn()

#place agent
state = lgsvl.AgentState()
state.transform = spawns[0]


ego = sim.add_agent(lgsvl.wise.DefaultAssets.ego_lincoln2017mkz_apollo5_full_analysis, lgsvl.AgentType.EGO, state)
ego.connect_bridge(
    env.str("LGSVL__AUTOPILOT_0_HOST", "169.254.42.170"),
    env.int("LGSVL__AUTOPILOT_0_PORT", lgsvl.wise.SimulatorSettings.bridge_port)
)

#place objects
forward = lgsvl.utils.transform_to_forward(spawns[0])
right = lgsvl.utils.transform_to_right(spawns[0])
up = lgsvl.utils.transform_to_up(spawns[0])

state = lgsvl.ObjectState()
state.transform.rotation = spawns[0].rotation
state.velocity = 0.000000001 * up
state.angular_velocity = 0.000000001 * right

start2 = (
        spawns[0].position
        + (5 + 20) * forward
        - (2 + 2) * right
)
state.transform.position = start2

o3 = sim.controllable_add("Bin", state)
print("Place Bin")

start2 = (
        spawns[0].position
        + (5 + 20) * forward
        - (2 + 0) * right
)
state.transform.position = start2

o3 = sim.controllable_add("BinGreen", state)
print("Place BinGreen")

# Dreamview setup
dv = lgsvl.dreamview.Connection(sim, ego, env.str("LGSVL__AUTOPILOT_0_HOST", "169.254.42.170"))
dv.set_hd_map('Borregas Ave')
# dv.set_hd_map('Single Lane Road')
dv.set_vehicle('Lincoln2017MKZ_LGSVL')
dv.set_setup_mode('Mkz Lgsvl')

modules = [
    'Localization',
    'Perception',
    'Transform',
    'Routing',
    'Prediction',
    'Planning',
    'Traffic Light',
    'Control'
]
destination = spawns[0].destinations[0]
dv.setup_apollo(destination.position.x, destination.position.z, modules)

sim.run()
</code>
</pre>
        <div class="row FeatLayout">
            <h3>The video of the above case:</h3>
            <div class="col-md-6 portfolio-item">
              <video id="issue1-1" width="560" height="380" controls muted>
                <source src="SVLSimulator trash to ped.mp4" type="video/mp4">
              </video>
              <!-- <a href="Rush_Yellow_Lights2*Accidents.mp4"><img class="img-responsive" src="http://placehold.it/700x400"></a> -->
              <h3><a href="SVLSimulator trash to ped.mp4">LGSVL Side.</a></h3>
              <script>
                var vid3 = document.getElementById("issue1-1");
                function getCurTime3() { 
                  alert(vid3.currentTime);
                } 
                function setCurTime3(time) {              
                  vid3.currentTime=time;
                } 
              </script> 
              <p>
                <!-- In this situation, the traffic light turns from green to yellow at <a href="#" onclick="setCurTime3(9.5)">9S</a> and the ego vehicle has reached the stop line. Although the ego vehicle is expected to go straight, it hesitated at the junction (<a href="#" onclick="setCurTime3(11)">11S</a>) and crossed the intersection at the red light (<a href="#" onclick="setCurTime3(18)">18S</a>). 
                Hence, the ego vehicle violates the yellow light and red light parts of Article38. </p> -->
              </p>
            </div>

            
            <div class="col-md-6 portfolio-item">
                  <video id="issue1-2" width="560" height="380" controls muted>
                    <source src="Apollo trash to ped.mp4" type="video/mp4">
                  </video>
                  <!-- <a href="Rush_Yellow_Lights2*Accidents.mp4"><img class="img-responsive" src="http://placehold.it/700x400"></a> -->
                  <h3><a href="Apollo trash to ped.mp4">Apollo Side.</a></h3>
                  <script>
                    var vid2 = document.getElementById("issue1-2");
                    function getCurTime2() { 
                      alert(vid2.currentTime);
                    } 
                    function setCurTime2(time) {              
                      vid2.currentTime=time;
                    } 
                  </script> 
                  <!-- <p>In this situation, the traffic light turns from green to yellow at <a href="#" onclick="setCurTime2(12)">12S</a> and there is not enough distance for the vehicle to stop. Although the ego vehicle is expected to go straight, it hesitated at the junction (<a href="#" onclick="setCurTime2(14)">14S</a>) and crossed the intersection at the red light (<a href="#" onclick="setCurTime2(20)">20S</a>). 
                  Hence, the ego vehicle violates the yellow light and red light parts of Article38. </p> -->
            </div>

            
        </div>



            <p>In this case, two trash bins are classfied as one vehicle.</p>
<pre>
<code>
import os
import lgsvl
from environs import Env

import math
import random



class CUS_LGVSL:
    def __init__(self, sim):
        self.sim = sim

    def transform_apollo_coord_to_lgsvl_coord(self, apollo_x, apollo_y):
        point = self.sim.map_from_gps(northing = apollo_y, easting = apollo_x)
        return point

    def find_the_point_on_line_for_lgsvl(self, point):
        sx = point.position.x
        sy = point.position.y
        sz = point.position.z
        adjusted_point = lgsvl.Vector(sx , sy, sz)
        return self.sim.map_point_on_lane(adjusted_point) 

    def Add_heading_to_the_point(self, point):
        gps = self.sim.map_to_gps(point)
        adjuested_point = self.sim.map_from_gps(
                northing=gps.northing,
                easting=gps.easting,
                altitude=gps.altitude,
                orientation=gps.orientation,
            )
        return adjuested_point

    def get_lgsvl_state(self, start_point_x, start_point_y):
        start_point = self.transform_apollo_coord_to_lgsvl_coord(start_point_x,start_point_y)          
        start_point = self.find_the_point_on_line_for_lgsvl(start_point)
        start_point = self.Add_heading_to_the_point(point=start_point)
        return start_point


def main():
    env = Env()
    sim = lgsvl.Simulator(
        env.str("LGSVL__SIMULATOR_HOST", "169.254.42.175"),
        env.int("LGSVL__SIMULATOR_PORT", lgsvl.wise.SimulatorSettings.simulator_port)
    )

    xxx = CUS_LGVSL(sim)

    # if sim.current_scene == "12da60a7-2fc9-474d-a62a-5cc08cb97fe8":
    if sim.current_scene == lgsvl.wise.DefaultAssets.map_borregasave:
        sim.reset()
    else:
        sim.load(lgsvl.wise.DefaultAssets.map_borregasave)

    spawns = sim.get_spawn()
    #place agent
    state = lgsvl.AgentState()
    # state.transform = spawns[1]

    ego_position = xxx.get_lgsvl_state(587120.77, 4141205.08)
    state.transform = ego_position


    forward = lgsvl.utils.transform_to_forward(ego_position)
    right = lgsvl.utils.transform_to_right(ego_position)
    up = lgsvl.utils.transform_to_up(ego_position)

    ego = sim.add_agent(lgsvl.wise.DefaultAssets.ego_lincoln2017mkz_apollo5_full_analysis, lgsvl.AgentType.EGO, state)
    ego.connect_bridge(
        env.str("LGSVL__AUTOPILOT_0_HOST", "169.254.42.170"),
        env.int("LGSVL__AUTOPILOT_0_PORT", lgsvl.wise.SimulatorSettings.bridge_port)
    )

    #place objects
    state = lgsvl.ObjectState()
    state.transform.rotation = ego_position.rotation
    state.velocity = 0.000000001 * up
    state.angular_velocity = 0.000000001 * right


    start2 = (
            ego_position.position
            + (5 + 20) * forward
            - (0.8) * right
    )
    state.transform.position = start2

    o3 = sim.controllable_add("Bin", state)
    print("Place Bin")


    start2 = (
            ego_position.position
            + (5 + 20) * forward
            - (1.4) * right
    )
    state.transform.position = start2

    o3 = sim.controllable_add("BinGreen", state)
    print("Place BinGreen")


    # Dreamview setup
    dv = lgsvl.dreamview.Connection(sim, ego, env.str("LGSVL__AUTOPILOT_0_HOST", "169.254.42.170"))
    dv.set_hd_map('Borregas Ave')
    # dv.set_hd_map('Single Lane Road')
    dv.set_vehicle('Lincoln2017MKZ_LGSVL')
    dv.set_setup_mode('Mkz Lgsvl')

    modules = [
        'Localization',
        'Perception',
        'Transform',
        'Routing',
        'Prediction',
        'Planning',
        'Traffic Light',
        'Control'
    ]
    destination = spawns[1].destinations[0]
    dv.setup_apollo(destination.position.x, destination.position.z, modules)

    sim.run()


if __name__ == '__main__':
    main()
</code>
</pre>
        <div class="row FeatLayout">
            <h3>The video of the above case:</h3>
            <div class="col-md-6 portfolio-item">
              <video id="issue1-1" width="560" height="380" controls muted>
                <source src="SVLSimulator trash to vehicle.mp4" type="video/mp4">
              </video>
              <!-- <a href="Rush_Yellow_Lights2*Accidents.mp4"><img class="img-responsive" src="http://placehold.it/700x400"></a> -->
              <h3><a href="SVLSimulator trash to vehicle.mp4">LGSVL Side.</a></h3>
              <script>
                var vid3 = document.getElementById("issue1-1");
                function getCurTime3() { 
                  alert(vid3.currentTime);
                } 
                function setCurTime3(time) {              
                  vid3.currentTime=time;
                } 
              </script> 
              <p>
                <!-- In this situation, the traffic light turns from green to yellow at <a href="#" onclick="setCurTime3(9.5)">9S</a> and the ego vehicle has reached the stop line. Although the ego vehicle is expected to go straight, it hesitated at the junction (<a href="#" onclick="setCurTime3(11)">11S</a>) and crossed the intersection at the red light (<a href="#" onclick="setCurTime3(18)">18S</a>). 
                Hence, the ego vehicle violates the yellow light and red light parts of Article38. </p> -->
              </p>
            </div>

            
            <div class="col-md-6 portfolio-item">
                  <video id="issue1-2" width="560" height="380" controls muted>
                    <source src="Apollo trash to vehicle.mp4" type="video/mp4">
                  </video>
                  <!-- <a href="Rush_Yellow_Lights2*Accidents.mp4"><img class="img-responsive" src="http://placehold.it/700x400"></a> -->
                  <h3><a href="Apollo trash to vehicle.mp4">Apollo Side.</a></h3>
                  <script>
                    var vid2 = document.getElementById("issue1-2");
                    function getCurTime2() { 
                      alert(vid2.currentTime);
                    } 
                    function setCurTime2(time) {              
                      vid2.currentTime=time;
                    } 
                  </script> 
                  <!-- <p>In this situation, the traffic light turns from green to yellow at <a href="#" onclick="setCurTime2(12)">12S</a> and there is not enough distance for the vehicle to stop. Although the ego vehicle is expected to go straight, it hesitated at the junction (<a href="#" onclick="setCurTime2(14)">14S</a>) and crossed the intersection at the red light (<a href="#" onclick="setCurTime2(20)">20S</a>). 
                  Hence, the ego vehicle violates the yellow light and red light parts of Article38. </p> -->
            </div>

            
        </div>




            <p>This is the end of QuickStart! Explore more interesting cases by our <a href="https://github.com/trashfuzz2023/Adversarial_Object_Assets.git">greedy graident-guided fuzzing algorithm</a>!</p>

            </div>

        </div>




    </section>


    <section id="sourcecode">
         <div class="container">
            <div class="section-header">
                    <h2 class="section-title wow fadeInDown">Source Code</h2>
                    <p class="wow fadeInDown">The links to the source code.</p>
                </div>

            <div class="row FeatLayout">
                <h2><a class="btn btn-primary btn-lg" href="https://github.com/trashfuzz2023/Adversarial_Object_Assets.git">The adversarial objects library</a></h2>
                <h2><a class="btn btn-primary btn-lg" href="#demo">The overall algorithm</a></h2>
            </div>

        </div>
    </section>


    <section id="specifications">
        	 <div class="container">
        	   <div class="section-header">
                        <h2 class="section-title wow fadeInDown">Specifications</h2>
                        <p class="wow fadeInDown">The specification we use in our experiment. Adopted from LawBreaker.</p>
                    </div>


           <div class="row FeatLayout">
        <pre>
          <code>
...DSL description for scenario0
Trace trace = EXE(scenario0);

//law38
//Green Lights
law38_sub1_1 = (trafficLightAhead.color == green) & (stoplineAhead(2) | junctionAhead(2)) & ~PriorityNPCAhead & ~PriorityPedsAhead;
law38_sub1_2 = F[0,2](speed > 0.5);
law38_sub1 = G (law38_sub1_1 -> law38_sub1_2); 
//Yellow Lights
law38_sub2_1 = ((trafficLightAhead.color == yellow) & (stoplineAhead(0) | currentLane.number .+ 1 == 0)) -> (F[0,2] (speed > 0.5));
law38_sub2_2 = ((trafficLightAhead.color == yellow) & stoplineAhead(3.5) & ~stoplineAhead(0.5) & currentLane.number > 0) -> (F[0,3] (speed < 0.5));
law38_sub2 = G (law38_sub2_1 & law38_sub2_2); 
//Red LightS
law38_sub3_1 = ((trafficLightAhead.color == red) & (stoplineAhead(2) | junctionAhead(2)) & ~(direction == right)) -> (F[0,3] (speed < 0.5));
law38_sub3_2 = ((trafficLightAhead.color == red) & (stoplineAhead(2) | junctionAhead(2)) & direction == right & ~PriorityNPCAhead & ~PriorityPedsAhead) -> (F[0,2] (speed > 0.5));
law38_sub3 = G (law38_sub3_1 & law38_sub3_2); 
law38 = law38_sub1 & law38_sub2 & law38_sub3;


//law44
law44_sub1 = currentLane.number >= 2;
law44_sub2 = (speed >= speedLimit.lowerLimit) & (speed <= speedLimit.upperLimit);
law44_sub3 = isChangingLane & currentLane.number >= 2;
law44_sub4 = G(law44_sub1 -> law44_sub2);
law44_sub5 = G(law44_sub3 -> ~PriorityNPCAhead);
law44 = law44_sub4 & law44_sub5;


//law45
law45 = G( speed >= speedLimit.lowerLimit & speed <= speedLimit.upperLimit);


//law46
law_46_sub2 = G( (direction == left | direction == right | isTurningAround) -> (speed <= 30 ));
law_46_sub3 = G( (rain >= 0.5 | fog >= 0.5 | snow >=0.5 | visibility <= 50 ) -> (speed <= 30));
law46 = (law_46_sub2) & (law_46_sub3);

//law47
law47_sub1 = (turnSignal == left) & ((F[-1,2](hornOn)) | ((highBeamOn & (highBeamOn -> (F[0, 2](lowBeamOn)) ) ) | (lowBeamOn & (lowBeamOn -> (F[0, 2](highBeamOn)) ) ))) & (F[0, 10]( (turnSignal == right) & (((isChangingLane) -> (NearestNPC(5))) & (isChangingLane) ) ));
law47 = G(isOverTaking -> law47_sub1);


//law50
law50 = G( (PriorityNPCAhead | crosswalkAhead(2)) -> ~(gear == 2) ); 


//law51
//turn_left
law51_sub3_1 =(trafficLightAhead.color == green & direction == left & Time <= 20:00 & Time >= 7:00) -> (turnSignal == left);
law51_sub3_2 =(trafficLightAhead.color == green & direction == left & (Time >= 20:00 | Time <= 7:00)) -> (turnSignal == left & lowBeamOn);
law51_sub3 = G(law51_sub3_1 & law51_sub3_2);  
//go_in_line_at_green
law51_sub4_1 = trafficLightAhead.color == green & (~NPCAhead(8) | (( NPCAhead(8) -> F[0,2](NPCAhead.speed > 0.5)  ) & NPCAhead(8)));
law51_sub4_2 = (F[0, 3](speed > 0.5)) & ~NPCAhead(0.5);
law51_sub4 = G(law51_sub4_1 -> law51_sub4_2);
//stop_in_line_at_red
law51_sub5_1 = trafficLightAhead.color == red & (stoplineAhead(2) | junctionAhead(2) | NPCAhead(0.5));
law51_sub5_2 = F[0, 2](speed < 0.5);
law51_sub5 = G(law51_sub5_1 -> law51_sub5_2);  
//tuen_right_stop_in_line_at_red
law51_sub6 = G((direction == right & NPCAhead(2) & (F[0, 2](NPCAhead.speed < 0.5)) ) -> F[0, 3] (speed < 0.5));
//priority_for_straight
law51_sub7 = G(((direction == right | direction == left) & (PriorityNPCAhead | PriorityPedsAhead)) -> F[0, 2] (speed < 0.5));
law51 = law51_sub3 & law51_sub4 & law51_sub5 & law51_sub6 & law51_sub7;


//law52
law52 = G((signalAhead == 0 & (PriorityNPCAhead | PriorityPedsAhead) & junctionAhead(1)) -> F[0, 2] (speed < 0.5));


//law53
law53 = G((isTrafficJam & (NPCAhead.speed < 0.5 | NPCAhead(0.5) | junctionAhead(1) ))-> F[0, 2] (speed < 0.5));

//law57
law57_sub1 = G(direction == left ->  turnSignal == left);
law57_sub2 = G(direction == right ->  turnSignal == right);
law57 = law57_sub1 & law57_sub2;

//law58
law58_sub1_1 = (~streetLightOn & (Time >= 20:00 | Time <= 7:00) ) | (rain >= 0.5 | fog >= 0.5 | snow >= 0.5);
law58_sub1 = (law58_sub1_1 & ~NPCAhead(10))-> highBeamOn;
law58_sub2 =  NPCAhead(10) -> ~highBeamOn;
law58_sub3 = fog >= 0.5 -> (fogLightOn & warningFlashOn);
law58 = G(law58_sub1 & law58_sub2 & law58_sub3);

//law59
law59_sub1 = (crosswalkAhead(5) | (signalAhead == 0 & junctionAhead(1)) ) & (Time >= 20:00 | Time <= 7:00);
law59_sub2 = F[0,3](highBeamOn & (highBeamOn -> F[0,3](lowBeamOn)) ) | F[0,3](lowBeamOn & (lowBeamOn -> F[0,3](highBeamOn)) );
law59 = G(law59_sub1 ->  law59_sub2);


//law62
law62 = G (~honkingAllowed ->  ~hornOn);


trace |= law38 & law44 & law45 & law46 & law47 & law50 & law51 & law52 & law53 & law57 & law58 & law59 & law62; 
          </code>
        </pre>
        </div>
	 </div>
	 </section>








   
   
  

    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script> 
    <script src="js/mousescroll.js"></script>
    <script src="js/smoothscroll.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/jquery.isotope.min.js"></script>
    <script src="js/jquery.inview.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/custom-scripts.js"></script>
</body>
</html>